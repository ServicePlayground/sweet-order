# 환경 변수 관리 가이드

## 📋 개요

이 문서는 Sweet Order 프로젝트의 환경 변수 관리 방식과 보안 정책에 대해 설명합니다.

## 🔒 보안 정책

### GitHub Actions 환경 변수

- AWS 계정 관련 환경변수 설정 (deploy-staging-backend.yml에서 배포할 때 필요하기 때문)
- GitHub Actions 로그에 민감한 정보가 노출될 수 있기 때문에, 꼭 필요한 부분은 `secrets.*` 직접 사용
- 그 외에 민감한 변수 설정 금지(App Runner에서 환경변수 추가하여, 런타임시 주입하도록 함)

### App Runner 환경 변수

- **staging/production**: `.env` 파일 무시, 시스템 환경 변수만 사용 (App Runner에서 런타임에 주입한 환경변수 사용)
- **개발 환경**: `.env.development` 파일 사용

## 🛠️ 설정 방법

### 1. (GitHub Actions) AWS 계정 관련 환경변수 설정

1. GitHub > Settings > Secrets and variables > Actions > Repository secrets > New repository secret

### 2. (App Runner) env 환경변수 설정

- 1. aws > secrets manager > 생성 > 다른 유형의 보안 암호 > 키/값 입력 > 생성 > 보안 암호 ARN복사
- 2. aws > IAM > 역할 > 생성 > 신뢰할수 있는 엔티티 선택 > 코드직접입력(AI활용) > 권한 apprunner관련 모두 + SecretsManagerReadWrite 정책 추가 > 생성
- 3. aws > app runner > 구성 > 편집 > 환경 변수 추가 > 환경변수이름: "SECRETS_ARN", 환경변수값: 보안 암호 ARN복사 > (보안) 2번에서 생성한 인스턴스 역할 추가

## 🚨 주의사항

1. **GitHub Actions**: `env` 섹션에 민감한 변수 설정 금지
2. **로그 노출**: 환경 변수 값이 로그에 노출되지 않도록 주의
3. **정기 검토**: 환경 변수 정기적인 보안 검토 필요
