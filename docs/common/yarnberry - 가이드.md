# Yarn Berry PnP ì„¤ì • ê°€ì´ë“œ

## ê°œìš”

ì´ í”„ë¡œì íŠ¸ëŠ” Yarn Berry 4.9.4ì™€ Plug'n'Play (PnP) ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ì—¬ ì˜ì¡´ì„±ì„ ê´€ë¦¬í•©ë‹ˆë‹¤. PnPëŠ” ê¸°ì¡´ì˜ `node_modules` í´ë” ë°©ì‹ê³¼ëŠ” ì™„ì „íˆ ë‹¤ë¥¸ í˜ì‹ ì ì¸ íŒ¨í‚¤ì§€ ê´€ë¦¬ ë°©ì‹ì…ë‹ˆë‹¤.

## ğŸ¤” ì™œ PnPë¥¼ ì‚¬ìš©í•˜ëŠ”ê°€?

### ê¸°ì¡´ node_modules ë°©ì‹ì˜ ë¬¸ì œì 

#### 1. **ë””ìŠ¤í¬ ê³µê°„ ë‚­ë¹„**

```
# ê¸°ì¡´ ë°©ì‹ (node_modules)
sweet-order/
â”œâ”€â”€ node_modules/           # ìˆ˜ë§Œ ê°œì˜ íŒŒì¼
â”‚   â”œâ”€â”€ react/             # React íŒ¨í‚¤ì§€
â”‚   â”œâ”€â”€ @types/react/      # React íƒ€ì… ì •ì˜
â”‚   â”œâ”€â”€ lodash/            # Lodash ìœ í‹¸ë¦¬í‹°
â”‚   â””â”€â”€ ... (ìˆ˜ë§Œ ê°œì˜ íŒ¨í‚¤ì§€)
â”œâ”€â”€ apps/backend/
â”‚   â””â”€â”€ node_modules/      # ë˜ ë‹¤ë¥¸ ìˆ˜ë§Œ ê°œì˜ íŒŒì¼
â”‚       â”œâ”€â”€ @nestjs/core/  # NestJS ì½”ì–´
â”‚       â”œâ”€â”€ @nestjs/jwt/   # JWT ì¸ì¦
â”‚       â””â”€â”€ ... (ë˜ ë‹¤ë¥¸ ìˆ˜ë§Œ ê°œ)
```

**ë¬¸ì œì :**

- ê°™ì€ íŒ¨í‚¤ì§€ê°€ ì—¬ëŸ¬ ê³³ì— ì¤‘ë³µ ì €ì¥
- `node_modules` í´ë” í•˜ë‚˜ë‹¹ ìˆ˜ë§Œ ê°œì˜ íŒŒì¼
- ë””ìŠ¤í¬ ê³µê°„ì„ ì—„ì²­ë‚˜ê²Œ ë§ì´ ì°¨ì§€

#### 2. **ì˜ì¡´ì„± ì§€ì˜¥ (Dependency Hell)**

```bash
# ê¸°ì¡´ ë°©ì‹ì—ì„œ ë°œìƒí•˜ëŠ” ë¬¸ì œë“¤
â”œâ”€â”€ node_modules/
â”‚   â”œâ”€â”€ package-a@1.0.0    # package-a ë²„ì „ 1.0.0
â”‚   â””â”€â”€ package-b@2.0.0    # package-b ë²„ì „ 2.0.0
â”‚       â””â”€â”€ node_modules/
â”‚           â””â”€â”€ package-a@1.5.0  # package-a ë²„ì „ 1.5.0 (ë‹¤ë¥¸ ë²„ì „!)
```

**ë¬¸ì œì :**

- ê°™ì€ íŒ¨í‚¤ì§€ì˜ ë‹¤ë¥¸ ë²„ì „ì´ ì—¬ëŸ¬ ê³³ì— ì¡´ì¬
- ì–´ë–¤ ë²„ì „ì´ ì‹¤ì œë¡œ ì‚¬ìš©ë˜ëŠ”ì§€ ë¶ˆë¶„ëª…
- "ë‚´ ì»´í“¨í„°ì—ì„œëŠ” ì‘ë™í–ˆëŠ”ë°" ë¬¸ì œ ë°œìƒ

#### 3. **ëŠë¦° ì„¤ì¹˜ ì†ë„**

```bash
# ê¸°ì¡´ ë°©ì‹
yarn install
# â†’ ìˆ˜ë§Œ ê°œì˜ íŒŒì¼ì„ ë³µì‚¬
# â†’ ì¤‘ë³µëœ íŒ¨í‚¤ì§€ë“¤ì„ ì—¬ëŸ¬ ë²ˆ ë‹¤ìš´ë¡œë“œ
# â†’ 5-10ë¶„ ì†Œìš”
```

### PnP ë°©ì‹ì˜ í•´ê²°ì±…

#### 1. **ë””ìŠ¤í¬ ê³µê°„ ì ˆì•½**

```
# PnP ë°©ì‹
sweet-order/
â”œâ”€â”€ .pnp.cjs               # ì˜ì¡´ì„± ë§µ íŒŒì¼ (í•˜ë‚˜ì˜ íŒŒì¼!)
â”œâ”€â”€ .yarn/cache/           # íŒ¨í‚¤ì§€ë“¤ì´ ì••ì¶•ëœ ìƒíƒœë¡œ ì €ì¥
â”‚   â”œâ”€â”€ npm-lodash-4.17.21-abc123.zip
â”‚   â”œâ”€â”€ npm-@nestjs-core-10.0.0-def456.zip
â”‚   â””â”€â”€ ...
â””â”€â”€ apps/backend/
    â””â”€â”€ (node_modules í´ë” ì—†ìŒ!)
```

**ì¥ì :**

- íŒ¨í‚¤ì§€ë“¤ì´ ì••ì¶•ëœ ìƒíƒœë¡œ ì €ì¥
- ì¤‘ë³µ ì œê±°ë¡œ ë””ìŠ¤í¬ ê³µê°„ 50-70% ì ˆì•½
- `.pnp.cjs` íŒŒì¼ í•˜ë‚˜ë¡œ ëª¨ë“  ì˜ì¡´ì„± ê´€ë¦¬

#### 2. **ëª…í™•í•œ ì˜ì¡´ì„± í•´ê²°**

```javascript
// .pnp.cjs íŒŒì¼ ë‚´ìš© (ê°„ì†Œí™”)
const packageMap = {
  lodash: "npm:lodash@4.17.21",
  "@nestjs/core": "npm:@nestjs/core@10.0.0",
  "@nestjs/jwt": "npm:@nestjs/jwt@11.0.0",
};
```

**ì¥ì :**

- ëª¨ë“  íŒ¨í‚¤ì§€ì˜ ì •í™•í•œ ë²„ì „ì´ í•˜ë‚˜ì˜ íŒŒì¼ì— ê¸°ë¡
- ì–´ë–¤ ë²„ì „ì´ ì‚¬ìš©ë˜ëŠ”ì§€ ëª…í™•
- ì˜ì¡´ì„± ì¶©ëŒ ìë™ í•´ê²°

#### 3. **ë¹ ë¥¸ ì„¤ì¹˜ ì†ë„**

```bash
# PnP ë°©ì‹
yarn install
# â†’ íŒ¨í‚¤ì§€ë“¤ì„ ì••ì¶•ëœ ìƒíƒœë¡œ ë‹¤ìš´ë¡œë“œ
# â†’ ì¤‘ë³µ ë‹¤ìš´ë¡œë“œ ì—†ìŒ
# â†’ 1-2ë¶„ ì†Œìš” (ê¸°ì¡´ ëŒ€ë¹„ 3-5ë°° ë¹ ë¦„)
```

## ğŸ“¦ íŒ¨í‚¤ì§€ ê³µìœ ëŠ” ì–´ë–»ê²Œ ë˜ëŠ”ê°€?

### ê¸€ë¡œë²Œ ìºì‹œ ì‹œìŠ¤í…œ

```bash
# PnPì˜ íŒ¨í‚¤ì§€ ê³µìœ  ë°©ì‹
~/.yarn/berry/cache/              # ê¸€ë¡œë²Œ ìºì‹œ (ëª¨ë“  í”„ë¡œì íŠ¸ ê³µìœ )
â”œâ”€â”€ npm-lodash-4.17.21-abc123.zip
â”œâ”€â”€ npm-@nestjs-core-10.0.0-def456.zip
â”œâ”€â”€ npm-typescript-5.5.0-ghi789.zip
â””â”€â”€ ...

# í”„ë¡œì íŠ¸ë³„ ìºì‹œ (ì„ íƒì )
sweet-order/.yarn/cache/          # í”„ë¡œì íŠ¸ë³„ ìºì‹œ
â”œâ”€â”€ npm-prisma-6.16.3-jkl012.zip
â””â”€â”€ ...
```

**ê³µìœ  ë°©ì‹:**

1. **ê¸€ë¡œë²Œ ìºì‹œ**: ëª¨ë“  í”„ë¡œì íŠ¸ê°€ ê³µìœ í•˜ëŠ” íŒ¨í‚¤ì§€ ì €ì¥ì†Œ
2. **í”„ë¡œì íŠ¸ë³„ ìºì‹œ**: íŠ¹ì • í”„ë¡œì íŠ¸ì—ì„œë§Œ ì‚¬ìš©í•˜ëŠ” íŒ¨í‚¤ì§€
3. **ì¤‘ë³µ ì œê±°**: ê°™ì€ íŒ¨í‚¤ì§€ëŠ” í•œ ë²ˆë§Œ ë‹¤ìš´ë¡œë“œí•˜ê³  ê³µìœ 

### ì‹¤ì œ ì˜ˆì‹œ

```bash
# í”„ë¡œì íŠ¸ Aì—ì„œ lodash ì„¤ì¹˜
cd project-a
yarn add lodash
# â†’ ~/.yarn/berry/cache/ì— lodash ë‹¤ìš´ë¡œë“œ

# í”„ë¡œì íŠ¸ Bì—ì„œ lodash ì„¤ì¹˜
cd project-b
yarn add lodash
# â†’ ì´ë¯¸ ë‹¤ìš´ë¡œë“œëœ lodash ì¬ì‚¬ìš© (ë‹¤ìš´ë¡œë“œ ì—†ìŒ!)

# Sweet Order í”„ë¡œì íŠ¸ì—ì„œ lodash ì„¤ì¹˜
cd sweet-order
yarn add lodash
# â†’ ì—­ì‹œ ì´ë¯¸ ë‹¤ìš´ë¡œë“œëœ lodash ì¬ì‚¬ìš©
```

## âš™ï¸ ì£¼ìš” ì„¤ì • íŒŒì¼

### `.yarnrc.yml` - PnP ì„¤ì •ì˜ í•µì‹¬

```yaml
# PnP ëª¨ë“œ í™œì„±í™” (node_modules ëŒ€ì‹  .pnp.cjs ì‚¬ìš©)
nodeLinker: pnp

# Yarn Berry ë²„ì „ ì§€ì •
yarnPath: .yarn/releases/yarn-4.9.4.cjs

# PnP ëª¨ë“œ ì„¤ì •
pnpMode: loose # strict vs loose

# ê¸€ë¡œë²Œ ìºì‹œ í™œì„±í™” (íŒ¨í‚¤ì§€ ê³µìœ )
enableGlobalCache: true

# ì˜ì¡´ì„± í•´ê²° ìµœì í™” (ë¬¸ì œ í•´ê²°ìš©)
packageExtensions:
  "@nestjs/core@*":
    peerDependencies:
      "typescript": "*" # TypeScript ì˜ì¡´ì„± ìë™ í•´ê²°
  "@nestjs/schematics@*":
    peerDependencies:
      "typescript": "*"
```

## ğŸ”§ PnP ëª¨ë“œ ìƒì„¸ ì„¤ëª…

### `pnpMode: loose` vs `strict`

#### **loose ëª¨ë“œ (í˜„ì¬ ì‚¬ìš© ì¤‘)**

```yaml
pnpMode: loose
```

**íŠ¹ì§•:**

- ê¸°ì¡´ ì½”ë“œì™€ì˜ í˜¸í™˜ì„±ì„ ìµœëŒ€í•œ ë³´ì¥
- ì¼ë¶€ íŒ¨í‚¤ì§€ê°€ PnPë¥¼ ì™„ì „íˆ ì§€ì›í•˜ì§€ ì•Šì•„ë„ ì‘ë™
- ê°œë°œ í¸ì˜ì„± ìš°ì„ 

**ì˜ˆì‹œ:**

```javascript
// loose ëª¨ë“œì—ì„œëŠ” ì´ëŸ° ì½”ë“œë„ ì‘ë™
import { someFunction } from "some-package"; // PnP ë¯¸ì§€ì› íŒ¨í‚¤ì§€ë„ ì‘ë™
```

#### **strict ëª¨ë“œ**

```yaml
pnpMode: strict
```

**íŠ¹ì§•:**

- ëª¨ë“  ì˜ì¡´ì„±ì´ ëª…ì‹œì ìœ¼ë¡œ ì„ ì–¸ë˜ì–´ì•¼ í•¨
- ë” ì—„ê²©í•œ ë³´ì•ˆê³¼ ì„±ëŠ¥
- PnPë¥¼ ì™„ì „íˆ ì§€ì›í•˜ëŠ” íŒ¨í‚¤ì§€ë§Œ ì‚¬ìš© ê°€ëŠ¥

### `enableGlobalCache: true` - íŒ¨í‚¤ì§€ ê³µìœ ì˜ í•µì‹¬

```yaml
enableGlobalCache: true
```

**ë™ì‘ ë°©ì‹:**

1. **ì²« ë²ˆì§¸ í”„ë¡œì íŠ¸**: íŒ¨í‚¤ì§€ë¥¼ ê¸€ë¡œë²Œ ìºì‹œì— ë‹¤ìš´ë¡œë“œ
2. **ë‘ ë²ˆì§¸ í”„ë¡œì íŠ¸**: ê¸€ë¡œë²Œ ìºì‹œì—ì„œ íŒ¨í‚¤ì§€ ì¬ì‚¬ìš©
3. **ê²°ê³¼**: ë‹¤ìš´ë¡œë“œ ì‹œê°„ ë‹¨ì¶•, ë””ìŠ¤í¬ ê³µê°„ ì ˆì•½

**ì£¼ì˜/ê¶Œì¥ ì„¤ì •:**

- `enableGlobalCache: true`ì¼ ë•Œ ìºì‹œëŠ” ë¡œì»¬ í”„ë¡œì íŠ¸ê°€ ì•„ë‹Œ ì‚¬ìš©ì í™ˆ `~/.yarn/berry/cache`ì— ì €ì¥ë©ë‹ˆë‹¤.

## ğŸ› ï¸ packageExtensions - ì˜ì¡´ì„± ë¬¸ì œ í•´ê²°

### ì™œ í•„ìš”í•œê°€?

ì¼ë¶€ íŒ¨í‚¤ì§€ë“¤ì€ PnPë¥¼ ì™„ì „íˆ ì§€ì›í•˜ì§€ ì•Šì•„ì„œ ì˜ì¡´ì„± ë¬¸ì œê°€ ë°œìƒí•©ë‹ˆë‹¤.

### NestJS ê´€ë ¨ ë¬¸ì œ í•´ê²°

**ë¬¸ì œ ìƒí™©:**

```bash
# NestJS íŒ¨í‚¤ì§€ë“¤ì´ TypeScriptë¥¼ ìš”êµ¬í•˜ì§€ë§Œ ì„ ì–¸ë˜ì§€ ì•ŠìŒ
@nestjs/core@10.0.0 requires typescript as peerDependency
@nestjs/schematics@10.0.0 requires typescript as peerDependency
```

**í•´ê²° ë°©ë²•:**

```yaml
packageExtensions:
  "@nestjs/core@*":
    peerDependencies:
      "typescript": "*" # TypeScript ì˜ì¡´ì„± ìë™ ì¶”ê°€
  "@nestjs/schematics@*":
    peerDependencies:
      "typescript": "*"
```

**ê²°ê³¼:**

- NestJS íŒ¨í‚¤ì§€ë“¤ì´ TypeScriptë¥¼ ìë™ìœ¼ë¡œ ì°¾ì„ ìˆ˜ ìˆìŒ
- ìˆ˜ë™ìœ¼ë¡œ TypeScriptë¥¼ ì„¤ì¹˜í•  í•„ìš” ì—†ìŒ


## ğŸš€ PnPì˜ ì‹¤ì œ ì¥ì 

### 1. **ì„±ëŠ¥ í–¥ìƒ** - ì„¤ì¹˜ ì†ë„ 3-5ë°° ë¹¨ë¼ì§

**ê¸°ì¡´ ë°©ì‹:**

```bash
yarn install
# â†’ ìˆ˜ë§Œ ê°œì˜ íŒŒì¼ì„ ë³µì‚¬
# â†’ ì¤‘ë³µëœ íŒ¨í‚¤ì§€ë“¤ì„ ì—¬ëŸ¬ ë²ˆ ë‹¤ìš´ë¡œë“œ
# â†’ 5-10ë¶„ ì†Œìš”
```

**PnP ë°©ì‹:**

```bash
yarn install
# â†’ íŒ¨í‚¤ì§€ë“¤ì„ ì••ì¶•ëœ ìƒíƒœë¡œ ë‹¤ìš´ë¡œë“œ
# â†’ ì¤‘ë³µ ë‹¤ìš´ë¡œë“œ ì—†ìŒ
# â†’ 1-2ë¶„ ì†Œìš”
```

### 2. **ë””ìŠ¤í¬ ê³µê°„ ì ˆì•½** - 50-70% ê³µê°„ ì ˆì•½

**ê¸°ì¡´ ë°©ì‹:**

```
sweet-order/
â”œâ”€â”€ node_modules/     # 2.1GB
â””â”€â”€ apps/backend/
    â””â”€â”€ node_modules/ # 1.8GB
# ì´ 3.9GB ì‚¬ìš©
```

**PnP ë°©ì‹:**

```
sweet-order/
â”œâ”€â”€ .pnp.cjs         # 1KB
â”œâ”€â”€ .yarn/cache/     # 1.3GB (ì••ì¶•ëœ ìƒíƒœ)
â””â”€â”€ apps/backend/
    â””â”€â”€ (node_modules ì—†ìŒ!)
# ì´ 1.3GB ì‚¬ìš© (66% ì ˆì•½!)
```

### 3. **ë³´ì•ˆ ê°•í™”** - ë¶ˆí•„ìš”í•œ íŒ¨í‚¤ì§€ ì ‘ê·¼ ë°©ì§€

**ê¸°ì¡´ ë°©ì‹:**

```javascript
// ì–´ë–¤ íŒ¨í‚¤ì§€ë“  ì ‘ê·¼ ê°€ëŠ¥ (ë³´ì•ˆ ìœ„í—˜)
import { someFunction } from "unwanted-package"; // ì˜ë„í•˜ì§€ ì•Šì€ íŒ¨í‚¤ì§€ ì ‘ê·¼
```

**PnP ë°©ì‹:**

```javascript
// ëª…ì‹œì ìœ¼ë¡œ ì„ ì–¸ëœ íŒ¨í‚¤ì§€ë§Œ ì ‘ê·¼ ê°€ëŠ¥
import { someFunction } from "declared-package"; // ì•ˆì „í•œ íŒ¨í‚¤ì§€ ì ‘ê·¼ë§Œ í—ˆìš©
```

### 4. **ì¼ê´€ì„± ë³´ì¥** - "ë‚´ ì»´í“¨í„°ì—ì„œëŠ” ì‘ë™í–ˆëŠ”ë°" ë¬¸ì œ í•´ê²°

**ê¸°ì¡´ ë°©ì‹:**

```bash
# ê°œë°œì Aì˜ ì»´í“¨í„°
node_modules/
â”œâ”€â”€ lodash@4.17.20
â””â”€â”€ react@18.2.0

# ê°œë°œì Bì˜ ì»´í“¨í„°
node_modules/
â”œâ”€â”€ lodash@4.17.21  # ë‹¤ë¥¸ ë²„ì „!
â””â”€â”€ react@18.1.0    # ë‹¤ë¥¸ ë²„ì „!
```

**PnP ë°©ì‹:**

```javascript
// .pnp.cjs íŒŒì¼ (ëª¨ë“  ê°œë°œìê°€ ë™ì¼)
const packageMap = {
  lodash: "npm:lodash@4.17.21", // ì •í™•í•œ ë²„ì „ ê³ ì •
  react: "npm:react@18.2.0", // ì •í™•í•œ ë²„ì „ ê³ ì •
};
```

## âš ï¸ ì£¼ì˜ì‚¬í•­ ë° ì œí•œì‚¬í•­

### IDE ì„¤ì • - PnP ì§€ì› í™œì„±í™”

#### VS Code ì„¤ì •

```json
// .vscode/settings.json
{
  "typescript.preferences.includePackageJsonAutoImports": "on",
  "typescript.suggest.autoImports": true,
  "typescript.enablePromptUseWorkspaceTsdk": true
}
```

**ì™œ í•„ìš”í•œê°€?**

- VS Codeê°€ `.pnp.cjs` íŒŒì¼ì„ ì½ê³  íŒ¨í‚¤ì§€ ìœ„ì¹˜ë¥¼ ì°¾ì„ ìˆ˜ ìˆë„ë¡ í•¨
- ìë™ ì™„ì„±ê³¼ íƒ€ì… ì²´í¬ê°€ ì œëŒ€ë¡œ ì‘ë™í•˜ë„ë¡ í•¨

#### WebStorm/IntelliJ ì„¤ì •

1. Settings > Languages & Frameworks > Node.js and NPM
2. Package manager: Yarn ì„ íƒ
3. Enable PnP support ì²´í¬

**ì™œ í•„ìš”í•œê°€?**

- IDEê°€ PnP ë°©ì‹ìœ¼ë¡œ íŒ¨í‚¤ì§€ë¥¼ ì°¾ì„ ìˆ˜ ìˆë„ë¡ í•¨
- ì½”ë“œ ë„¤ë¹„ê²Œì´ì…˜ê³¼ ë¦¬íŒ©í† ë§ì´ ì œëŒ€ë¡œ ì‘ë™í•˜ë„ë¡ í•¨

## ğŸ’» ì‹¤ì œ ê°œë°œ ì›Œí¬í”Œë¡œìš°

### íŒ¨í‚¤ì§€ ì„¤ì¹˜ - PnP ë°©ì‹

#### ë£¨íŠ¸ì—ì„œ íŒ¨í‚¤ì§€ ì¶”ê°€

```bash
# ë£¨íŠ¸ì— íŒ¨í‚¤ì§€ ì¶”ê°€ (ëª¨ë“  ì›Œí¬ìŠ¤í˜ì´ìŠ¤ì—ì„œ ì‚¬ìš© ê°€ëŠ¥)
yarn add lodash

# ê²°ê³¼: .pnp.cjs íŒŒì¼ì— lodash ì¶”ê°€
# ëª¨ë“  ì›Œí¬ìŠ¤í˜ì´ìŠ¤ì—ì„œ import ê°€ëŠ¥
```

#### íŠ¹ì • ì›Œí¬ìŠ¤í˜ì´ìŠ¤ì— íŒ¨í‚¤ì§€ ì¶”ê°€

```bash
# ë°±ì—”ë“œì—ë§Œ íŒ¨í‚¤ì§€ ì¶”ê°€
yarn workspace @sweet-order/backend add @nestjs/jwt

# ê²°ê³¼: ë°±ì—”ë“œ package.jsonì—ë§Œ ì¶”ê°€
# ë‹¤ë¥¸ ì›Œí¬ìŠ¤í˜ì´ìŠ¤ì—ì„œëŠ” ì‚¬ìš© ë¶ˆê°€
```

#### ê°œë°œ ì˜ì¡´ì„± ì¶”ê°€

```bash
# ë£¨íŠ¸ì— ê°œë°œ ë„êµ¬ ì¶”ê°€
yarn add -D prettier

# ê²°ê³¼: ëª¨ë“  ì›Œí¬ìŠ¤í˜ì´ìŠ¤ì—ì„œ ê°œë°œ ë„êµ¬ë¡œ ì‚¬ìš© ê°€ëŠ¥
```

### ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ - ì›Œí¬ìŠ¤í˜ì´ìŠ¤ ë°©ì‹

#### ë£¨íŠ¸ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰

```bash
# ë£¨íŠ¸ package.jsonì˜ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰
yarn dev                    # â†’ yarn workspace @sweet-order/backend dev
yarn build:production       # â†’ yarn workspace @sweet-order/backend build:production
```

#### ì›Œí¬ìŠ¤í˜ì´ìŠ¤ ìŠ¤í¬ë¦½íŠ¸ ì§ì ‘ ì‹¤í–‰

```bash
# íŠ¹ì • ì›Œí¬ìŠ¤í˜ì´ìŠ¤ì˜ ìŠ¤í¬ë¦½íŠ¸ ì§ì ‘ ì‹¤í–‰
yarn workspace @sweet-order/backend dev
yarn workspace @sweet-order/backend typecheck
yarn workspace @sweet-order/backend lint
```

### ì˜ì¡´ì„± ê´€ë¦¬ - PnP ìµœì í™”

#### ì˜ì¡´ì„± ì—…ë°ì´íŠ¸

```bash
# ëª¨ë“  íŒ¨í‚¤ì§€ ì—…ë°ì´íŠ¸
yarn upgrade

# íŠ¹ì • íŒ¨í‚¤ì§€ë§Œ ì—…ë°ì´íŠ¸
yarn upgrade lodash

# íŠ¹ì • ì›Œí¬ìŠ¤í˜ì´ìŠ¤ì˜ íŒ¨í‚¤ì§€ ì—…ë°ì´íŠ¸
yarn workspace @sweet-order/backend upgrade @nestjs/core
```

#### ìºì‹œ ê´€ë¦¬

```bash
# ìºì‹œ í™•ì¸ ë° ì •ë¦¬
yarn install --check-cache

# ê¸€ë¡œë²Œ ìºì‹œ ì •ë¦¬
yarn cache clean

# PnP íŒŒì¼ ì¬ìƒì„± (ë¬¸ì œ í•´ê²° ì‹œ)
rm .pnp.cjs
yarn install
```

## ğŸ”§ ë¬¸ì œ í•´ê²° ê°€ì´ë“œ

### Yarn ë””ë ‰í„°ë¦¬ êµ¬ì¡° ì´í•´ (`.yarn` ë‚´ë¶€)

#### `sdks/`

- VS Code/IDEê°€ í”„ë¡œì íŠ¸ì˜ ì •í™•í•œ ë²„ì „ì˜ TypeScript, ESLint ë“±ì„ ì‚¬ìš©í•˜ë„ë¡ í•˜ëŠ” SDK íŒŒì¼ ëª¨ìŒì…ë‹ˆë‹¤.
- `yarn dlx @yarnpkg/sdks vscode` ë˜ëŠ” `yarn sdks`ë¡œ ìƒì„±/ê°±ì‹ í•©ë‹ˆë‹¤.
- IDEê°€ PnP í™˜ê²½ì—ì„œ ì˜¬ë°”ë¥¸ ë°”ì´ë„ˆë¦¬ë¥¼ ì°¸ì¡°í•˜ê²Œ í•´ ì£¼ë¯€ë¡œ, íƒ€ì… ê²€ì‚¬/ìë™ì™„ì„±ì´ ì•ˆì •ì ì…ë‹ˆë‹¤.

#### `unplugged/`

- ì••ì¶•ëœ ìºì‹œ(zip) ìƒíƒœë¡œëŠ” ë™ì‘ì´ ì–´ë ¤ìš´ íŒ¨í‚¤ì§€ë¥¼ Yarnì´ ìë™ìœ¼ë¡œ â€œí¼ì¹œâ€ ìœ„ì¹˜ì…ë‹ˆë‹¤.
- ë¹Œë“œ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰, íŒŒì¼ ì‹œìŠ¤í…œ ì§ì ‘ ì ‘ê·¼ ë“±ì´ í•„ìš”í•œ íŒ¨í‚¤ì§€ê°€ ì´ ê²½ë¡œì—ì„œ ë™ì‘í•©ë‹ˆë‹¤.
- ì‚¬ìš©ìëŠ” ì¼ë°˜ì ìœ¼ë¡œ ìˆ˜ë™ ê´€ë¦¬í•  í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤.

#### `install-state.gz`

- ì„¤ì¹˜ ë‹¨ê³„ì˜ ìŠ¤ëƒ…ìƒ·(ë©”íƒ€ë°ì´í„°)ìœ¼ë¡œ, ì¬ì„¤ì¹˜ ì‹œ ë¬´ì—‡ì„ ê±´ë„ˆë›¸ ìˆ˜ ìˆëŠ”ì§€ ë¹ ë¥´ê²Œ íŒë‹¨í•©ë‹ˆë‹¤.
- Yarn 4ì—ì„œëŠ” ì´ íŒŒì¼ì„ ì»¤ë°‹í•˜ëŠ” ê²ƒì´ ê¶Œì¥ë©ë‹ˆë‹¤. CIì—ì„œë„ ì„¤ì¹˜ ìµœì í™”ê°€ ì¼ê´€ë˜ê²Œ ì ìš©ë©ë‹ˆë‹¤.

### ì˜ì¡´ì„± í•´ê²° ì˜¤ë¥˜

#### peer dependency ë¬¸ì œ í™•ì¸

```bash
# peer dependency ë¬¸ì œ ì§„ë‹¨
yarn explain peer-requirements

# ê²°ê³¼ ì˜ˆì‹œ:
# p11f819 â†’ âœ˜ @sweet-order/backend doesn't provide typescript
# â†’ TypeScriptê°€ ëˆ„ë½ë˜ì—ˆë‹¤ëŠ” ì˜ë¯¸
```

#### ì˜ì¡´ì„± íŠ¸ë¦¬ í™•ì¸

```bash
# íŠ¹ì • íŒ¨í‚¤ì§€ê°€ ì–´ë””ì„œ ì‚¬ìš©ë˜ëŠ”ì§€ í™•ì¸
yarn why lodash

# ê²°ê³¼ ì˜ˆì‹œ:
# @sweet-order/backend@workspace:apps/backend
# â””â”€ lodash@npm:4.17.21
#    â””â”€ Used by: @nestjs/common
```

### PnP ê´€ë ¨ ì˜¤ë¥˜

#### PnP íŒŒì¼ ì¬ìƒì„±

```bash
# PnP íŒŒì¼ì´ ì†ìƒë˜ì—ˆì„ ë•Œ
rm .pnp.cjs
yarn install

# ê²°ê³¼: ìƒˆë¡œìš´ .pnp.cjs íŒŒì¼ ìƒì„±
```

#### ìºì‹œ ì •ë¦¬

```bash
# ìºì‹œ ë¬¸ì œê°€ ìˆì„ ë•Œ
yarn cache clean
yarn install

# ê²°ê³¼: ìºì‹œë¥¼ ì •ë¦¬í•˜ê³  íŒ¨í‚¤ì§€ ì¬ë‹¤ìš´ë¡œë“œ
```


### ì¼ë°˜ì ì¸ ì˜¤ë¥˜ì™€ í•´ê²°ì±…

#### "Cannot resolve module" ì˜¤ë¥˜

```bash
# ë¬¸ì œ: íŒ¨í‚¤ì§€ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ
# í•´ê²°: íŒ¨í‚¤ì§€ê°€ .pnp.cjsì— ë“±ë¡ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸
yarn why <package-name>
```

#### "Peer dependency not found" ì˜¤ë¥˜

```bash
# ë¬¸ì œ: peer dependency ëˆ„ë½
# í•´ê²°: packageExtensionsì— ì¶”ê°€í•˜ê±°ë‚˜ ìˆ˜ë™ ì„¤ì¹˜
yarn add <missing-package>
```

#### IDEì—ì„œ íƒ€ì… ì¸ì‹ ì•ˆë¨

```bash
# ë¬¸ì œ: VS Codeì—ì„œ íƒ€ì…ì„ ì°¾ì§€ ëª»í•¨
# í•´ê²°: TypeScript ì„œë²„ ì¬ì‹œì‘
# VS Code: Ctrl+Shift+P â†’ "TypeScript: Restart TS Server"
```

## ğŸ“š ìš”ì•½

### PnPì˜ í•µì‹¬ ê°œë…

1. **node_modules í´ë” ì—†ìŒ**: `.pnp.cjs` íŒŒì¼ í•˜ë‚˜ë¡œ ëª¨ë“  ì˜ì¡´ì„± ê´€ë¦¬
2. **ê¸€ë¡œë²Œ ìºì‹œ**: ëª¨ë“  í”„ë¡œì íŠ¸ê°€ íŒ¨í‚¤ì§€ë¥¼ ê³µìœ í•˜ì—¬ ë””ìŠ¤í¬ ê³µê°„ ì ˆì•½
3. **ëª…í™•í•œ ì˜ì¡´ì„±**: ëª¨ë“  íŒ¨í‚¤ì§€ì˜ ì •í™•í•œ ë²„ì „ì´ í•˜ë‚˜ì˜ íŒŒì¼ì— ê¸°ë¡
4. **ë¹ ë¥¸ ì„¤ì¹˜**: ì••ì¶•ëœ íŒ¨í‚¤ì§€ë¡œ 3-5ë°° ë¹ ë¥¸ ì„¤ì¹˜ ì†ë„

### í˜„ì¬ í”„ë¡œì íŠ¸ì—ì„œì˜ í™œìš©

- **Sweet Order í”„ë¡œì íŠ¸**: Yarn Berry PnP + ì›Œí¬ìŠ¤í˜ì´ìŠ¤ë¡œ ëª¨ë…¸ë ˆí¬ ê´€ë¦¬
- **ë°±ì—”ë“œ**: NestJS + PostgreSQL
- **ì˜ì¡´ì„± ê´€ë¦¬**: packageExtensionsë¡œ NestJS í˜¸í™˜ì„± ë¬¸ì œ í•´ê²°
- **ê°œë°œ í™˜ê²½**: VS Code PnP ì§€ì›ìœ¼ë¡œ ì›í™œí•œ ê°œë°œ ê²½í—˜

## ğŸ“– ì°¸ê³  ìë£Œ

- [Yarn Berry ê³µì‹ ë¬¸ì„œ](https://yarnpkg.com/getting-started)
- [PnP ê°€ì´ë“œ](https://yarnpkg.com/features/pnp)
- [ì›Œí¬ìŠ¤í˜ì´ìŠ¤ ê°€ì´ë“œ](https://yarnpkg.com/features/workspaces)
- [packageExtensions ê°€ì´ë“œ](https://yarnpkg.com/configuration/yarnrc#packageExtensions)
