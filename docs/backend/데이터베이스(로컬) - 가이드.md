# 로컬 데이터베이스 가이드

## 개발 환경 설정

### PostgreSQL 설치 (macOS)

```bash
# PostgreSQL 설치
brew install postgresql@15

# PostgreSQL 서비스 시작
brew services start postgresql@15

# PostgreSQL에 접속
psql postgres
```

### 데이터베이스 생성

```sql
-- PostgreSQL에 접속한 후 실행
CREATE DATABASE sweet_order_dev;
CREATE USER sweet_order_user WITH PASSWORD 'your_password';
GRANT ALL PRIVILEGES ON DATABASE sweet_order_dev TO sweet_order_user;
```

### 환경 변수 설정

```bash
# apps/backend/.env.development
DATABASE_URL="postgresql://
```

## Prisma 명령어

```bash
# 개발 환경 마이그레이션
yarn db:migrate:dev

# 개발 환경 데이터베이스 리셋
yarn db:reset:dev

# 개발 환경 시드 데이터
yarn db:seed:dev

# Prisma Studio 실행
yarn db:studio:dev

# 배포 환경 마이그레이션 (Docker 컨테이너 시작 시 자동 실행, 환경 변수 필요)
yarn db:migrate:deploy
```

## 주의사항

- 로컬 개발용 데이터베이스이므로 실제 서비스 데이터와 분리
- 스테이징/프로덕션은 AWS RDS 사용 ([AWS RDS 가이드](<../infra/aws/AWS%20RDS(데이터베이스)%20-%20가이드.md>) 참고)
- 환경 변수는 `.env.development` 파일에 설정
